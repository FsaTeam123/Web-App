:host{
  display: block;
  min-height: 100dvh;
  background: #0e0e12;
}

/* Header */
.session-header{
  position: sticky; top: 0; z-index: 1000;
  background: rgba(12,12,16,.95);
  border-bottom: 1px solid rgba(255,255,255,.08);
  backdrop-filter: blur(6px);
  padding: 10px clamp(12px, 3vw, 20px);
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: center;
  gap: 12px;
}
.session-info{ display:flex; align-items:center; gap:10px; min-width:0; }
.session-info .badge{
  background:#e6bd3b; color:#121212; font-weight:800; font-size:.82rem;
  padding:2px 8px; border-radius:999px; white-space:nowrap;
}
.session-info .title{
  color: #fff;                               /* branco */
  font-size: clamp(1.2rem, 1.4vw + .8rem, 1.6rem); /* maior e responsivo */
  font-weight: 900;
  overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
}
.session-nav{ display:grid; grid-auto-flow:column; gap:8px; overflow-x:auto; -webkit-overflow-scrolling:touch; }
.nav-btn{
  display:inline-flex; align-items:center; gap:8px; padding:8px 10px;
  border-radius:12px; border:1px solid rgba(255,255,255,.12);
  background: rgba(20,20,24,.9); color:#f4f4f5; cursor:pointer;
  transition: transform .12s, border-color .12s, background-color .12s;
}
.nav-btn .ico{ width:18px; height:18px; fill: currentColor; }
.nav-btn .nav-label{ font-weight:700; font-size:.92rem; }
.nav-btn:hover{ transform: translateY(-1px); border-color:#e6bd3b; }
.nav-btn.active{ border-color:#e6bd3b; background: rgba(24,24,28,.95); box-shadow: 0 6px 14px rgba(0,0,0,.35); }

/* Canvas */
.canvas-wrap{
  position: relative;
  width: 100%;
  height: 100dvh; /* fallback imediato */
  height: calc(100dvh - var(--session-header-h, 72px)); /* vale quando a var existir */
  min-height: 300px;
}
.grid-canvas{
  position: absolute;
  inset: 0;
  z-index: 1;
  width: 100%;
  height: 100%;
  display: block;
  background:#0e0e12;
  touch-action: none;  /* pinch/pan custom */
  cursor: crosshair;
}

/* Zoom panel */
.zoom-panel{
  position:absolute; left: 16px; bottom: 16px;
  display:flex; align-items:center; gap:8px;
  background: rgba(12,12,16,.8); border:1px solid rgba(255,255,255,.12);
  border-radius:12px; padding:8px 10px; box-shadow:0 8px 20px rgba(0,0,0,.45);
}
.zoom-panel input[type="range"]{ width: 160px; }
.zbtn, .zreset{
  background:#d4af37; color:#121212; border:none; border-radius:10px; padding:6px 10px;
  font-weight:800; cursor:pointer;
}
.zbtn:active, .zreset:active{ transform: translateY(1px); }
.zread{ min-width: 46px; text-align: right; font-weight:700; }

/* Draw panel */
.draw-panel{
  position:absolute; right:16px; bottom:16px;
  display:flex; flex-direction:column; gap:8px;
  background: rgba(12,12,16,.8); border:1px solid rgba(255,255,255,.12);
  border-radius:12px; padding:10px; box-shadow:0 8px 20px rgba(0,0,0,.45);
  max-width: 260px;
  z-index: 2;
  color:#fff;
}
.draw-panel .row{ display:flex; align-items:center; gap:8px; }
.tbtn{
  background: rgba(20,20,24,.9); color:#f4f4f5; border:1px solid rgba(255,255,255,.12);
  border-radius:10px; padding:6px 10px; cursor:pointer; font-weight:700;
}
.tbtn.active{ border-color:#e6bd3b; background: rgba(24,24,28,.95); }
.tbtn.danger{ background:#3b1e1e; border-color:#733; }
.mini{ font-size:.82rem; opacity:.8; }
.draw-panel .hint{
  color:#fff;
  opacity:1;           /* antes estava ~0.7 */
}

.mesa-overlay{
  position: fixed; inset: 0; z-index: 2000;
  background: rgba(0,0,0,.50);
  display:flex; align-items: center; justify-content: center;
  padding: 8px;
}
.mesa-modal{
  color: #fff; 
  max-height: 90dvh;
  background: rgba(12,12,16,.96);
  border: 1px solid rgba(255,255,255,.12);
  border-radius: 16px;
  box-shadow: 0 20px 50px rgba(0,0,0,.6);
  display:flex; flex-direction: column;
  overflow: hidden;
}
.mesa-header{
  display:flex; align-items:center; gap: 8px;
  padding: 12px 14px;
  border-bottom: 1px solid rgba(255,255,255,.08);
}
.mesa-header h3{ margin:0; font-weight:900; }
.mesa-header .spacer{ flex:1; }
.mesa-icon{
  background: rgba(20,20,24,.9); color:#f4f4f5;
  border:1px solid rgba(255,255,255,.12);
  border-radius:10px; padding:6px 10px; cursor:pointer;
}
.mesa-body{ padding: 14px; overflow:auto; }
.mesa-muted{ color:#b8b8c3; padding: 8px 2px; }
.mesa-err{ color:#ff8a8a; padding: 8px 2px; }

.master-card{
  display:flex; align-items:center; gap:12px;
  padding: 10px; border:1px solid rgba(255,255,255,.12);
  border-radius:12px; background: rgba(24,24,28,.95);
  margin-bottom: 10px;
}
.players-grid{
  display:grid; grid-template-columns: repeat(auto-fill, minmax(240px,1fr));
  gap: 10px;
}
.player-card{
  display:flex; align-items:center; gap:12px;
  padding: 10px; border:1px solid rgba(255,255,255,.12);
  border-radius:12px; background: rgba(20,20,24,.9);
}
.avatar-wrap{ position: relative; width: 44px; height: 44px; flex: 0 0 44px; }
.avatar{
  width:100%; height:100%; object-fit: cover;
  border-radius: 50%; border:1px solid rgba(255,255,255,.12);
  background: #111;
}
.status-dot{
  position:absolute; right:-2px; bottom:-2px;
  width: 12px; height: 12px; border-radius:50%;
  border:2px solid #141418; background:#7a7a7a;
}
.status-dot.online{ background:#27c93f; }

.info{ min-width: 0; }
.line1{ display:flex; align-items:center; gap:8px; min-width:0; }
.nick{ font-weight:800; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.id{ opacity:.8; font-size:.9rem; }
.role{
  padding: 2px 8px; border-radius:999px; background:#e6bd3b; color:#121212;
  font-weight:800; font-size:.74rem;
}
.line2{ opacity:.9; font-size:.92rem; }

@media (max-width: 560px){
  .players-grid{ grid-template-columns: 1fr; }
}


/* Responsivo */
@media (max-width: 768px){
  .session-header{ grid-template-columns:1fr; gap:8px; }
  .session-info .title{ font-size:1.2rem; } /* estava 1rem */
  .nav-btn .nav-label{ display:none; } /* só ícones */
  .nav-btn .ico{ width:20px; height:20px; }
  .canvas-wrap{ height: calc(100dvh - 118px); }

  .zoom-panel{ left: 8px; bottom: 8px; padding:6px 8px; gap:6px; }
  .zoom-panel input[type="range"]{ width: 120px; }
  .draw-panel{ right: 8px; bottom: 8px; padding:8px; gap:6px; }
  .draw-panel .hint{ display:none; }
}

@media (max-width: 420px){
  .zoom-panel input[type="range"]{ width: 96px; }
}
